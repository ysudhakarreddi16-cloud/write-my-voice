import { GoogleGenAI, Type, Modality } from "@google/genai";

export async function handler(event) {
  try {
    const body = JSON.parse(event.body || "{}");

    const ai = new GoogleGenAI({
      apiKey: process.env.API_KEY
    });

    const response = await ai.models.generateContent({
      model: "gemini-3-flash-preview",
      contents: {
        parts: [{ text: body.text || "Hello" }]
      }
    });

    return {
      statusCode: 200,
      body: JSON.stringify({
        result: response.text
      })
    };
  } catch (err) {
    return {
      statusCode: 500,
      body: JSON.stringify({
        error: err.message
      })
    };
  }
}
